<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Match Vocabulary</title>
    <link rel="stylesheet" href="/statics/styles.css">
    <style>
        /* Thanh taskbar ở trên */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #fff;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            justify-content: center; /* Căn giữa khung */
        }

        header {
            width: 100%;
            background-color: #007bff;
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        header h1 {
            margin: 0;
            font-size: 1.8rem;
            text-transform: uppercase;
        }

        header img {
            max-width: 100px;
            margin-bottom: 10px;
        }

        /* Thanh taskbar */
        .taskbar {
            width: 100%;
            background-color: #ff66b2; /* Thanh taskbar màu hồng */
            color: white;
            padding: 10px 0;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between; /* Các nút được căn đều */
            align-items: center;
            padding: 10px 20px;
        }

        .taskbar .title {
            font-weight: bold;
            font-size: 1.5rem;
        }

        .taskbar .buttons {
            display: flex;
            gap: 15px;
        }

        .taskbar button {
            padding: 5px 10px;
            font-size: 1rem;
            background-color: white;
            color: #ff66b2;
            border: 1px solid #ff66b2;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .taskbar button:hover {
            background-color: #ff3385;
            color: white;
        }

        /* Khung chứa các ô ghép nối */
        .container {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 50px;
            width: 100%;
            max-width: 1200px;
            padding: 20px;
            background-color: #f2bdd1; /* Khung hồng chứa các ô */
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .column {
            width: 45%;
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
        }

        .box, .target {
            padding: 0;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            transition: transform 0.3s, background-color 0.3s;
            width: 100px;
            height: 100px;
            margin: 10px;
            box-sizing: border-box;
            position: relative;
        }

        .box {
            background-color: #fff;
            border: 2px solid #007bff;
            color: #007bff;
            font-weight: bold;
            cursor: grab;
        }

        .box:active {
            transform: scale(0.98);
        }

        .target {
            background-color: #e0f7fa;
            border: 2px dashed #007bff;
            min-height: 60px;
            color: #007bff;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .target.dropped {
            background-color: #f0f0f0;
        }

        .target.correct {
            background-color: #d4edda;
            border-color: #28a745;
        }

        .target.wrong {
            background-color: #f8d7da;
            border-color: #dc3545;
        }

        #buttons {
            display: flex;
            justify-content: center;
            margin-top: 30px;
            gap: 20px;
        }

        button {
            padding: 10px 20px;
            font-size: 1.1rem;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #0056b3;
        }

        #result {
            margin-top: 20px;
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            color: #333;
        }

        footer {
            margin-top: auto;
            width: 100%;
            background-color: #007bff;
            color: white;
            text-align: center;
            padding: 15px 0;
        }

        footer a {
            color: white;
            text-decoration: none;
            font-weight: bold;
            transition: color 0.3s;
        }

        footer a:hover {
            color: #cce7ff;
        }
        .container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-top: 50px;
            width: 100%;
            max-width: 1200px;
            padding: 20px;
            background-color: #f2bdd1; /* Khung hồng chứa các ô */
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        .column {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
        }

        .box, .target {
            padding: 0;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            transition: transform 0.3s, background-color 0.3s;
            width: 100px;
            height: 100px;
            margin: 10px;
            box-sizing: border-box;
            position: relative;
        }

        /* Các style khác cho .box, .target, etc. */
    </style>
</head>
<body>
    <div class="taskbar">
        <span class="title"></span>
        <div class="buttons">
            <button id="help-btn">Help</button>
        </div>
    </div>

    <header>
        <h1>Match Vocabulary</h1>
    </header>

    <div class="container" id="words-container">
        <!-- Render 12 từ và định nghĩa với Thymeleaf, sắp xếp ngẫu nhiên -->
        <div th:each="vocabulary : ${vocabularies.subList(0, 12)}" class="box" draggable="true" th:data-id="${vocabulary.id}">
            <span th:text="${vocabulary.word}"></span>
        </div>
    </div>

    <div class="container" id="definitions-container">
        <!-- Render định nghĩa tương ứng với từ -->
        <div th:each="vocabulary : ${vocabularies.subList(0, 12)}" class="target" th:data-id="${vocabulary.id}">
            <span th:text="${vocabulary.definition}"></span>
        </div>
    </div>

    <div id="buttons">
        <button id="submit-btn">Submit</button>
        <button id="restart-btn">Restart</button>
        <a href="/" id="home-btn">
            <button>Go Home</button>
        </a>
    </div>

    <div id="result"></div>

    <footer>
        <p>Footer content here</p>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const wordsContainer = document.getElementById('words-container');
        const definitionsContainer = document.getElementById('definitions-container');
        const submitBtn = document.getElementById('submit-btn');
        const restartBtn = document.getElementById('restart-btn');
        const resultDiv = document.getElementById('result');
        const resetBtn = document.getElementById('reset-btn');
        const helpBtn = document.getElementById('help-btn');

        let correctCount = 0;
        let totalCount = 12; // Tổng số lượng từ vựng

        // Danh sách từ vựng có sẵn (ví dụ từ vựng tiếng Anh - tiếng Việt)
        const vocabularies = [
            { id: 1, word: 'apple', definition: 'quả táo' },
            { id: 2, word: 'banana', definition: 'quả chuối' },
            { id: 3, word: 'cat', definition: 'con mèo' },
            { id: 4, word: 'dog', definition: 'con chó' },
            { id: 5, word: 'sun', definition: 'mặt trời' },
            { id: 6, word: 'moon', definition: 'mặt trăng' },
            { id: 7, word: 'book', definition: 'quyển sách' },
            { id: 8, word: 'pen', definition: 'cây bút' },
            { id: 9, word: 'table', definition: 'cái bàn' },
            { id: 10, word: 'chair', definition: 'cái ghế' },
            { id: 11, word: 'car', definition: 'xe ô tô' },
            { id: 12, word: 'bus', definition: 'xe buýt' },
            { id: 13, word: 'computer', definition: 'máy tính' },
            { id: 14, word: 'phone', definition: 'điện thoại' },
            // ... (Thêm từ vựng khác vào đây nếu cần)
        ];
		// const vocabularies = /*[[${vocabularies}]]*/ [];
        // Hàm xáo trộn mảng
        function shuffle(array) {
            let currentIndex = array.length, randomIndex, temporaryValue;
            while (currentIndex !== 0) {
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex -= 1;
                temporaryValue = array[currentIndex];
                array[currentIndex] = array[randomIndex];
                array[randomIndex] = temporaryValue;
            }
            return array;
        }

        // Hàm tải lại danh sách từ vựng
        function loadVocabularies() {
            // Chọn ngẫu nhiên 12 từ
            const selectedVocabularies = shuffle(vocabularies).slice(0, 12); // Xáo trộn và lấy 12 từ

            // Làm sạch các phần tử cũ
            wordsContainer.innerHTML = '';
            definitionsContainer.innerHTML = '';

            // Chèn các phần tử đã xáo trộn vào HTML
            selectedVocabularies.forEach(vocabulary => {
                const wordElement = document.createElement('div');
                wordElement.classList.add('box');
                wordElement.dataset.id = vocabulary.id;
                wordElement.textContent = vocabulary.word;
                wordElement.setAttribute('draggable', 'true');
                wordsContainer.appendChild(wordElement);

                const targetElement = document.createElement('div');
                targetElement.classList.add('target');
                targetElement.dataset.id = vocabulary.id;
                targetElement.textContent = vocabulary.definition;
                definitionsContainer.appendChild(targetElement);
            });

            // Lấy các phần tử kéo thả
            const boxes = document.querySelectorAll('.box');
            const targets = document.querySelectorAll('.target');

            // Thêm chức năng kéo thả
            boxes.forEach(box => {
                box.addEventListener('dragstart', () => {
                    box.classList.add('dragging');
                });

                box.addEventListener('dragend', () => {
                    box.classList.remove('dragging');
                });
            });

            targets.forEach(target => {
                target.addEventListener('dragover', (e) => {
                    e.preventDefault();
                });

                target.addEventListener('drop', (e) => {
                    e.preventDefault();
                    const draggingBox = document.querySelector('.dragging');
                    if (draggingBox && !target.classList.contains('dropped')) {
                        target.textContent = draggingBox.textContent;
                        target.classList.add('dropped');
                        target.dataset.paired = draggingBox.dataset.id;
                        draggingBox.remove();
                    }
                });
            });
        }

        // Gọi loadVocabularies khi trang được tải lần đầu
        loadVocabularies();

        // Help functionality
        helpBtn.addEventListener('click', () => {
            alert("Here are some tips: \n1. Drag the English words into the correct Vietnamese definitions.\n2. Submit your answer when you're ready.");
        });

        // Submit functionality
        submitBtn.addEventListener('click', () => {
            correctCount = 0;
            const targets = document.querySelectorAll('.target');
            targets.forEach(target => {
                if (target.dataset.paired === target.dataset.id) {
                    target.classList.add('correct');
                    correctCount++;
                } else {
                    target.classList.add('wrong');
                }
            });

            resultDiv.textContent = `You matched ${correctCount} out of ${totalCount} words correctly.`;
        });

        // Restart functionality
        restartBtn.addEventListener('click', () => {
            loadVocabularies(); // Gọi lại hàm để tải danh sách từ vựng mới ngẫu nhiên
            resultDiv.textContent = ''; // Xóa kết quả trước đó
        });
    });

    </script>

</body>
</html>
